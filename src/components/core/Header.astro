---
import Button from "../ui/Button.astro";
import LiveStatus from "../sections/LiveStatus.astro";

const navItems = [
    { label: "Menu", href: "/menu" },
    { label: "About", href: "/about" },
    { label: "Access", href: "/access" },
    { label: "News", href: "/news" },
];
---

<header
    class="fixed top-0 left-0 w-full z-50 bg-canvas/80 backdrop-blur-sm border-b border-ink/5"
>
    <nav
        class="max-width-7xl mx-auto px-6 md:px-12 h-20 flex items-center justify-between"
    >
        <div class="flex items-center gap-8">
            <a href="/" class="text-2xl font-serif tracking-tight text-ink">
                Emma Coffee<span class="text-accent ml-1">.</span>
            </a>
            <LiveStatus
                class="hidden lg:flex border-l border-ink/10 pl-8 h-6"
            />
        </div>

        <!-- Desktop Nav -->
        <ul class="hidden md:flex items-center gap-12">
            {
                navItems.map((item) => (
                    <li>
                        <a
                            href={item.href}
                            class="text-[10px] font-bold text-ink/60 hover:text-ink transition-colors duration-200 uppercase letter-spacing-widest"
                        >
                            {item.label}
                        </a>
                    </li>
                ))
            }
            <li>
                <Button href="/contact" class="px-6! py-2.5! text-[10px]!">
                    Contact
                </Button>
            </li>
        </ul>

        <!-- Mobile Toggle -->
        <button
            class="md:hidden text-ink p-2"
            aria-label="Open Menu"
            id="open-menu"
        >
            <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.2"
            >
                <line x1="4" y1="8" x2="20" y2="8"></line>
                <line x1="4" y1="16" x2="20" y2="16"></line>
            </svg>
        </button>
    </nav>
</header>

<!-- Mobile Menu Overlay -->
<div
    id="mobile-menu"
    class="fixed inset-0 z-100 bg-canvas translate-x-full transition-transform duration-500 ease-out flex flex-col items-center justify-center text-center p-6"
>
    <!-- Close Button -->
    <button
        id="close-menu"
        class="absolute top-6 right-6 text-ink p-2"
        aria-label="Close Menu"
    >
        <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.2"
        >
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
    </button>

    <!-- Mobile Links -->
    <nav class="space-y-12">
        <ul class="space-y-8">
            {
                navItems.map((item) => (
                    <li>
                        <a
                            href={item.href}
                            class="text-4xl font-serif text-ink hover:text-accent transition-colors"
                        >
                            {item.label}
                        </a>
                    </li>
                ))
            }
        </ul>
        <div class="pt-12">
            <Button href="/contact" class="px-12! py-5! text-sm!">
                Contact Us
            </Button>
        </div>
    </nav>

    <!-- Footer in Menu -->
    <div class="absolute bottom-12 left-0 w-full text-center px-6">
        <p class="text-[10px] uppercase tracking-widest text-ink/30 font-sans">
            Â© 2026 Emma Coffee. Artisan Minimalist.
        </p>
    </div>
</div>

<script>
    const openBtn = document.getElementById("open-menu");
    const closeBtn = document.getElementById("close-menu");
    const mobileMenu = document.getElementById("mobile-menu");
    const mobileLinks = mobileMenu?.querySelectorAll("a");

    function toggleMenu() {
        mobileMenu?.classList.toggle("translate-x-full");
        document.body.classList.toggle("overflow-hidden");
    }

    openBtn?.addEventListener("click", toggleMenu);
    closeBtn?.addEventListener("click", toggleMenu);

    // Close menu on link click
    mobileLinks?.forEach((link) => {
        link.addEventListener("click", () => {
            mobileMenu?.classList.add("translate-x-full");
            document.body.classList.remove("overflow-hidden");
        });
    });
</script>

<!-- Spacer to prevent content from jumping under fixed header -->
<div class="h-20"></div>
